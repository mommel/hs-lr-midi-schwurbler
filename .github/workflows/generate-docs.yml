name: Code Documentation
on:
  push:
    branches: master
jobs:
  build-documentation:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      # Builds the documentation
      - uses: mattnotmitt/doxygen-action@v1.2.0
        with:
          working-directory: './code/MVP/'
          doxyfile-path: './Doxyfile'
      - uses: mattnotmitt/doxygen-action@v1.2.0
        with:
          working-directory: './code/Schwurbler360/'
          doxyfile-path: './Doxyfile'
      - uses: mattnotmitt/doxygen-action@v1.2.0
        with:
          working-directory: 'code/SchwurblAir/'
          doxyfile-path: './Doxyfile'
      - uses: seanmiddleditch/gha-publish-to-git@master
        with:
          branch: update-docs
          github_token: '${{ secrets.GITHUB_TOKEN  }}'
        if: success() && github.event == 'push'
